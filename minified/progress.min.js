(function(l,e){"object"===typeof exports?e(exports):"function"===typeof define&&define.amd?define(["exports"],e):e(l)})(this,function(l){function e(a){this._targetElement="undefined"!=typeof a.length?a:[a];"undefined"===typeof window._progressjsId&&(window._progressjsId=1);"undefined"===typeof window._progressjsIntervals&&(window._progressjsIntervals={});this._options={theme:"blue",overlayMode:!1,considerTransition:!0}}function k(a,c){var d=this;100<=c&&(c=100);a.hasAttribute("data-progressjs")&&
setTimeout(function(){"undefined"!=typeof d._onProgressCallback&&d._onProgressCallback.call(d,a,c);var b=g(a);b.style.width=parseInt(c)+"%";var b=b.querySelector(".progressjs-percent"),f=parseInt(b.innerHTML.replace("%",""));(function(a,b,c){function d(a,b,c){var h=Math.abs(b-c);3>h?e=30:20>h?e=20:intervanIn=1;0!=b-c&&(a.innerHTML=(f?++b:--b)+"%",setTimeout(function(){d(a,b,c)},e))}var f=!0;b>c&&(f=!1);var e=10;d(a,b,c)})(b,f,parseInt(c))},50)}function g(a){var c=parseInt(a.getAttribute("data-progressjs"));
return a.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="'+c+'"] > .progressjs-inner')}function p(a,c){var d=this,b=this._targetElement[0];b&&(b=parseInt(b.getAttribute("data-progressjs")),"undefined"!=typeof window._progressjsIntervals[b]&&clearInterval(window._progressjsIntervals[b]),window._progressjsIntervals[b]=setInterval(function(){n.call(d,a)},c))}function n(a){for(var c=0,d=this._targetElement.length;c<d;c++){var b=this._targetElement[c];if(b.hasAttribute("data-progressjs")){var f=
g(b);(f=parseInt(f.style.width.replace("%","")))&&k.call(this,b,f+(a||1))}}}function q(){"undefined"!=typeof this._onBeforeEndCallback&&(!0===this._options.considerTransition?g(this._targetElement[0]).addEventListener(r(),this._onBeforeEndCallback,!1):this._onBeforeEndCallback.call(this));var a=this._targetElement[0];if(a){for(var a=parseInt(a.getAttribute("data-progressjs")),c=0,d=this._targetElement.length;c<d;c++){var b=this._targetElement[c],f=g(b);if(!f)return;var e=1;100>parseInt(f.style.width.replace("%",
""))&&(k.call(this,b,100),e=500);(function(a,b){setTimeout(function(){a.parentNode.className+=" progressjs-end";setTimeout(function(){a.parentNode.parentNode&&(a.parentNode.parentNode.removeChild(a.parentNode),b.removeAttribute("data-progressjs"))},1E3)},e)})(f,b)}if(window._progressjsIntervals[a])try{clearInterval(window._progressjsIntervals[a]),window._progressjsIntervals[a]=null,delete window._progressjsIntervals[a]}catch(t){}}}function s(){var a=this._targetElement[0];if(a){for(var a=parseInt(a.getAttribute("data-progressjs")),
c=0,d=this._targetElement.length;c<d;c++){var b=this._targetElement[c],f=g(b);if(!f)return;(function(a,b){a.parentNode.className+=" progressjs-end";setTimeout(function(){a.parentNode.parentNode.removeChild(a.parentNode);b.removeAttribute("data-progressjs")},1E3)})(f,b)}if(window._progressjsIntervals[a])try{clearInterval(window._progressjsIntervals[a]),window._progressjsIntervals[a]=null,delete window._progressjsIntervals[a]}catch(e){}}}function r(){var a,c=document.createElement("fakeelement"),d=
{transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in d)if(void 0!==c.style[a])return d[a]}var m=function(a){if("object"===typeof a)return new e(a);if("string"===typeof a){if(a=document.querySelectorAll(a))return new e(a);throw Error("There is no element with given selector.");}return new e(document.body)};m.version="0.1.0";m.fn=e.prototype={clone:function(){return new e(this)},setOption:function(a,c){this._options[a]=
c;return this},setOptions:function(a){var c=this._options,d={},b;for(b in c)d[b]=c[b];for(b in a)d[b]=a[b];this._options=d;return this},start:function(){"undefined"!=typeof this._onBeforeStartCallback&&this._onBeforeStartCallback.call(this);var a;"BODY"==this._targetElement[0].nodeName?a=document.body:(a=this._targetElement[0],a.style.position="relative");if(!a.querySelector(".progressjs-container")){var c=document.createElement("div");c.className="progressjs-container";a.appendChild(c)}a=0;for(c=
this._targetElement.length;a<c;a++){var d=this._targetElement[a];if(!d.hasAttribute("data-progressjs")){var b=d,f,e;"body"===b.tagName.toLowerCase()?(f=b.clientWidth,e=b.clientHeight):(f=b.offsetWidth,e=b.offsetHeight);for(;b&&!isNaN(b.offsetLeft)&&!isNaN(b.offsetTop);)b=b.offsetParent;d.setAttribute("data-progressjs",window._progressjsId);b=document.createElement("div");b.className="progressjs-progress progressjs-theme-"+this._options.theme;"body"===d.tagName.toLowerCase()?b.style.position="fixed":
b.style.position="absolute";b.setAttribute("data-progressjs",window._progressjsId);var g=document.createElement("div");g.className="progressjs-inner";var h=document.createElement("div");h.className="progressjs-percent";h.innerHTML="1%";g.appendChild(h);this._options.overlayMode&&"body"===d.tagName.toLowerCase()?(b.style.left=0,b.style.right=0,b.style.top=0,b.style.bottom=0):(b.style.width="BODY"==d.nodeName?"100%":f+"px",this._options.overlayMode&&(b.style.height=e+"px"));b.appendChild(g);d.querySelector(".progressjs-container").appendChild(b);
k(d,1);++window._progressjsId}}return this},set:function(a){for(var c=0,d=this._targetElement.length;c<d;c++)k.call(this,this._targetElement[c],a);return this},increase:function(a){n.call(this,a);return this},autoIncrease:function(a,c){p.call(this,a,c);return this},end:function(){q.call(this);return this},kill:function(){s.call(this);return this},onbeforeend:function(a){if("function"===typeof a)this._onBeforeEndCallback=a;else throw Error("Provided callback for onbeforeend was not a function");return this},
onbeforestart:function(a){if("function"===typeof a)this._onBeforeStartCallback=a;else throw Error("Provided callback for onbeforestart was not a function");return this},onprogress:function(a){if("function"===typeof a)this._onProgressCallback=a;else throw Error("Provided callback for onprogress was not a function");return this}};return l.progressJs=m});
